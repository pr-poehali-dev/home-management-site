-- Создание таблицы новостей
CREATE TABLE IF NOT EXISTS news (
    id SERIAL PRIMARY KEY,
    title VARCHAR(500) NOT NULL,
    content TEXT NOT NULL,
    tag VARCHAR(100) NOT NULL,
    published_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Вставка начальных данных
INSERT INTO news (title, content, tag, published_date) VALUES
('Плановые работы по лифтам в домах №12, №14', 'С 20 по 25 ноября будут проводиться плановые работы по техническому обслуживанию лифтов. Просим жильцов заранее планировать свои перемещения. Работы будут проводиться с 9:00 до 18:00.', 'Новое о ЖКХ', '2025-11-15'),
('Общее собрание жильцов дома №8', 'Приглашаем всех собственников квартир на общее собрание 18 ноября в 19:00 в конференц-зале первого этажа. Повестка дня: утверждение сметы на капитальный ремонт, выбор подрядчика.', 'Собрание', '2025-11-10'),
('Новые тарифы на отопление', 'С 1 декабря 2025 года изменяются тарифы на коммунальные услуги. Тариф на отопление увеличится на 4,7%. Подробная информация доступна на официальном сайте поставщика услуг.', 'Важно!', '2025-11-05'),
('Благоустройство детских площадок', 'Завершены работы по обновлению детских площадок в домах №3, №7, №15. Установлено новое безопасное покрытие и современное игровое оборудование.', 'Новое о ЖКХ', '2025-11-01'),
('График отключения горячей воды', 'В период с 5 по 9 декабря в домах по ул. Васенко будет отключена горячая вода в связи с плановым ремонтом теплосетей. Приносим извинения за временные неудобства.', 'Важно!', '2025-10-28'),
('Итоги конкурса на лучший двор', 'Подведены итоги ежегодного конкурса на лучший двор. Победителем стал ЖК Золотое сечение. Жители получат сертификат на дополнительное благоустройство территории.', 'Собрание', '2025-10-20');

-- Индексы для быстрого поиска
CREATE INDEX idx_news_tag ON news(tag);
CREATE INDEX idx_news_published_date ON news(published_date DESC);
